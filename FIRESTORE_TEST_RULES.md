# üî• Firestore Rules ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏î‡πà‡∏ß‡∏ô

## ‚ö†Ô∏è ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏µ‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡πÅ‡∏ï‡πà‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:** Firestore Rules ‡∏ö‡∏•‡πá‡∏≠‡∏Ñ‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

---

## üöÄ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏î‡πà‡∏ß‡∏ô (5 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÄ‡∏™‡∏£‡πá‡∏à)

### **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Firebase Console**

1. ‡πÄ‡∏õ‡∏¥‡∏î: https://console.firebase.google.com
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ: **game-shop-72ad1**
3. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà **Firestore Database** (‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢)
4. ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÅ‡∏ó‡πá‡∏ö **"Rules"** (‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô)

---

### **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡πÉ‡∏ä‡πâ Test Mode (‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß)**

**‡∏•‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î** ‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Test Mode: ‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏≠‡πà‡∏≤‡∏ô/‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏ô‡∏ñ‡∏∂‡∏á‡∏™‡∏¥‡πâ‡∏ô‡∏õ‡∏µ 2025
    match /{document=**} {
      allow read, write: if request.time < timestamp.date(2025, 12, 31);
    }
  }
}
```

---

### **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: Publish**

1. ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° **"Publish"** (‡∏™‡∏µ‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô)
2. ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
3. ‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à!

---

### **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö**

1. **‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏ß‡πá‡∏ö**
2. **Hard Refresh:**
   - Windows: **Ctrl + Shift + R**
   - Mac: **Cmd + Shift + R**
3. **‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏Å‡∏°**
4. ‚úÖ **‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß!**

---

## üéØ ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô

‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡πÄ‡∏û‡∏¥‡πà‡∏°:

### **1. ‡∏•‡∏ö Cache**
```
1. ‡∏Å‡∏î F12
2. ‡πÑ‡∏õ‡πÅ‡∏ó‡πá‡∏ö "Application" (Chrome) ‡∏´‡∏£‡∏∑‡∏≠ "Storage" (Firefox)
3. ‡∏Ñ‡∏•‡∏¥‡∏Å "Clear site data"
4. Refresh (F5)
```

### **2. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô Firestore**
```
1. Firebase Console ‚Üí Firestore Database
2. ‡πÄ‡∏õ‡∏¥‡∏î Collection "gameItems"
3. ‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏°‡∏µ Documents ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
4. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö field "gameId" ‡∏ß‡πà‡∏≤‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏Å‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
```

---

## ‚ö†Ô∏è ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á

**Test Mode:**
- ‚úÖ ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö
- ‚úÖ ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß
- ‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ (‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ)
- ‚ö†Ô∏è ‡πÉ‡∏ä‡πâ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß ‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏ï‡∏±‡πâ‡∏á Rules ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

**‡∏´‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à:**
- ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô Rules ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Å‡∏ß‡πà‡∏≤ (‡∏î‡∏π‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á)

---

## üõ°Ô∏è Rules ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á)

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Helper Functions
    function isSignedIn() {
      return request.auth != null;
    }
    
    function isAdmin() {
      return isSignedIn() && 
             get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role == 'admin';
    }
    
    function isVerified() {
      return isSignedIn() && 
             get(/databases/$(database)/documents/users/$(request.auth.uid)).data.verified == true;
    }

    // Users Collection
    match /users/{userId} {
      allow read: if isSignedIn();
      allow create: if isAdmin();
      allow update: if isAdmin() || (isSignedIn() && request.auth.uid == userId);
      allow delete: if isAdmin();
    }

    // Games Collection
    match /games/{gameId} {
      allow read: if isSignedIn();  // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å isVerified() ‡πÄ‡∏õ‡πá‡∏ô isSignedIn()
      allow create: if isSignedIn() && request.resource.data.createdBy == request.auth.uid;
      allow update, delete: if isAdmin() || (isSignedIn() && resource.data.createdBy == request.auth.uid);
    }

    // Game Items Collection
    match /gameItems/{itemId} {
      allow read: if isSignedIn();  // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å isVerified() ‡πÄ‡∏õ‡πá‡∏ô isSignedIn()
      allow create: if isSignedIn();
      allow update, delete: if isAdmin() || isSignedIn();
    }
  }
}
```

**‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á:**
- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å `isVerified()` ‡πÄ‡∏õ‡πá‡∏ô `isSignedIn()`
- ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ user ‡∏ó‡∏µ‡πà login ‡πÅ‡∏•‡πâ‡∏ß (‡πÅ‡∏°‡πâ verified ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô false) ‡∏Å‡πá‡∏≠‡πà‡∏≤‡∏ô/‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÑ‡∏î‡πâ

---

## üìã Checklist

- [ ] ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Firebase Console
- [ ] ‡πÄ‡∏õ‡∏¥‡∏î Firestore Database ‚Üí Rules
- [ ] ‡∏ß‡∏≤‡∏á Test Mode Rules
- [ ] Publish
- [ ] Hard Refresh ‡πÄ‡∏ß‡πá‡∏ö (Ctrl+Shift+R)
- [ ] ‡∏•‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏Å‡∏°
- [ ] ‚úÖ ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏´‡πá‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß!

---

## üéâ ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÅ‡∏Å‡πâ‡πÄ‡∏™‡∏£‡πá‡∏à

**‡∏ñ‡πâ‡∏≤‡πÄ‡∏´‡πá‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß:**
1. ‚úÖ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ñ‡∏∑‡∏≠ Firestore Rules ‡∏à‡∏£‡∏¥‡∏á‡πÜ!
2. ‡πÉ‡∏ä‡πâ Test Mode ‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô (‡∏ñ‡∏∂‡∏á‡∏™‡∏¥‡πâ‡∏ô‡∏õ‡∏µ 2025)
3. ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô Rules ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Å‡∏ß‡πà‡∏≤ (‡πÉ‡∏ä‡πâ `isSignedIn()` ‡πÅ‡∏ó‡∏ô `isVerified()`)

**‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô:**
- ‡∏™‡πà‡∏á screenshot Console logs ‡πÉ‡∏´‡πâ‡∏ú‡∏°
- ‡∏à‡∏∞‡πÅ‡∏Å‡πâ‡πÉ‡∏´‡πâ‡∏ï‡πà‡∏≠

---

**‡∏•‡∏≠‡∏á‡πÄ‡∏•‡∏¢! ‡πÅ‡∏Å‡πâ‡πÑ‡∏î‡πâ 100% ‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô!** üöÄ


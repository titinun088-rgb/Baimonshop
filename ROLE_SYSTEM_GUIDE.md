# ЁЯЫбя╕П р╕гр╕░р╕Ър╕Ър╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й (Role-Based Access Control)

## тЬЕ р╕кр╕гр╕╕р╕Ыр╕гр╕░р╕Ър╕Ър╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕Зр╣Ар╕кр╕гр╣Зр╕Ир╕кр╕бр╕Ър╕╣р╕гр╕Ур╣М

### ЁЯОп Roles р╣Гр╕Щр╕гр╕░р╕Ър╕Ъ

1. **Admin** (`role: 'admin'`)
   - р╣Ар╕Вр╣Йр╕▓р╕Цр╕╢р╕Зр╣Др╕Фр╣Йр╕Чр╕╕р╕Бр╕лр╕Щр╣Йр╕▓
   - р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
   - р╕кр╕гр╣Йр╕▓р╕З/р╣Бр╕Бр╣Йр╣Др╕В/р╕ер╕Ър╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
   - р╕Бр╕│р╕лр╕Щр╕Фр╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
   - р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤/р╕Ыр╕Пр╕┤р╣Ар╕кр╕Шр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Гр╕лр╕бр╣И
   - **р╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╕гр╕нр╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤** (verified р╣Др╕бр╣Ир╕Бр╕гр╕░р╕Чр╕Ъ admin)

2. **Seller** (`role: 'seller'`)
   - р╣Ар╕Вр╣Йр╕▓р╕Цр╕╢р╕Зр╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕Бр╕▓р╕гр╕Вр╕▓р╕вр╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ
   - р╕Хр╣Йр╕нр╕Зр╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╕Ир╕▓р╕Б Admin р╕Бр╣Ир╕нр╕Щр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ (`verified: true`)
   - р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕Вр╣Йр╕▓р╕Цр╕╢р╕Зр╕лр╕Щр╣Йр╕▓р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й

---

## ЁЯУК Firestore Schema (р╕нр╕▒р╕Ыр╣Ар╕Фр╕Х)

```typescript
users/{uid}: {
  uid: string;
  email: string;
  displayName: string;
  shopName: string;
  role: 'admin' | 'seller';           // тЬи р╣Гр╕лр╕бр╣И
  verified: boolean;                  // тЬи р╣Гр╕лр╕бр╣И
  emailVerified: boolean;
  createdAt: Date;
  photoURL?: string;
}
```

### Field Descriptions

| Field | Type | Description |
|-------|------|-------------|
| `uid` | string | Firebase Auth UID |
| `email` | string | р╕нр╕╡р╣Ар╕бр╕ер╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й |
| `displayName` | string | р╕Кр╕╖р╣Ир╕нр╕Чр╕╡р╣Ир╣Бр╕кр╕Фр╕Зр╣Гр╕Щр╕гр╕░р╕Ър╕Ъ |
| `shopName` | string | р╕Кр╕╖р╣Ир╕нр╕гр╣Йр╕▓р╕Щр╕Др╣Йр╕▓ |
| `role` | `'admin' \| 'seller'` | р╕Ър╕Чр╕Ър╕▓р╕Чр╕Вр╕нр╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й |
| `verified` | boolean | **р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╣Вр╕Фр╕в Admin** (р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╕лр╕гр╕╖р╕нр╣Др╕бр╣И) |
| `emailVerified` | boolean | р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕нр╕╡р╣Ар╕бр╕ер╣Бр╕ер╣Йр╕зр╕лр╕гр╕╖р╕нр╕вр╕▒р╕З (р╕Ир╕▓р╕Б Firebase Auth) |
| `createdAt` | Date | р╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕Зр╕Ър╕▒р╕Нр╕Кр╕╡ |
| `photoURL` | string? | URL р╕гр╕╣р╕Ыр╣Вр╕Ыр╕гр╣Др╕Яр╕ер╣М (optional) |

---

## ЁЯФР Access Control Flow

### р╕кр╕│р╕лр╕гр╕▒р╕Ъ Seller

```
р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Б
   тЖУ
verified = true (auto-verified)
   тЖУ
р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕нр╕╡р╣Ар╕бр╕е (emailVerified = true)
   тЖУ
р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ
   тЖУ
р╣Ар╕Вр╣Йр╕▓р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╕Чр╕▒р╕Щр╕Чр╕╡ тЬЕ
```

### р╕кр╕│р╕лр╕гр╕▒р╕Ъ Admin

```
р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Б / Admin р╕кр╕гр╣Йр╕▓р╕З
   тЖУ
role = 'admin'
   тЖУ
р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕нр╕╡р╣Ар╕бр╕е
   тЖУ
р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ
   тЖУ
р╣Ар╕Вр╣Йр╕▓р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╕Чр╕▒р╕Щр╕Чр╕╡ тЬЕ (р╣Др╕бр╣Ир╕Хр╣Йр╕нр╕Зр╕гр╕н verified)
```

---

## ЁЯОи Components р╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕З

### 1. `RoleProtectedRoute`
**Path:** `src/components/RoleProtectedRoute.tsx`

р╕Ыр╣Йр╕нр╕Зр╕Бр╕▒р╕Щр╕лр╕Щр╣Йр╕▓р╕Хр╕▓р╕б role р╕Чр╕╡р╣Ир╕Бр╕│р╕лр╕Щр╕Ф

```tsx
<RoleProtectedRoute allowedRoles={["admin"]}>
  <AdminPage />
</RoleProtectedRoute>
```

**Features:**
- тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ user logged in
- тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ emailVerified
- тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ verified (р╕вр╕Бр╣Ар╕зр╣Йр╕Щ admin)
- тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ role р╕Хр╕гр╕Зр╕Бр╕▒р╕Ър╕Чр╕╡р╣Ир╕Бр╕│р╕лр╕Щр╕Ф
- тЬЕ р╣Бр╕кр╕Фр╕Зр╕лр╕Щр╣Йр╕▓р╣Ар╕Хр╕╖р╕нр╕Щр╕кр╕зр╕вр╕Зр╕▓р╕бр╕Цр╣Йр╕▓р╣Др╕бр╣Ир╕бр╕╡р╕кр╕┤р╕Чр╕Шр╕┤р╣М

### 2. `CreateUserDialog`
**Path:** `src/components/CreateUserDialog.tsx`

Dialog р╕кр╕│р╕лр╕гр╕▒р╕Ъ Admin р╕кр╕гр╣Йр╕▓р╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Гр╕лр╕бр╣И

**Features:**
- тЬЕ р╕Яр╕нр╕гр╣Мр╕бр╕кр╕гр╣Йр╕▓р╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕кр╕бр╕Ър╕╣р╕гр╕Ур╣М
- тЬЕ р╣Ар╕ер╕╖р╕нр╕Б role (admin/seller)
- тЬЕ р╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓ verified р╣Др╕Фр╣Йр╕Чр╕▒р╕Щр╕Чр╕╡
- тЬЕ р╕кр╣Ир╕Зр╕нр╕╡р╣Ар╕бр╕ер╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤
- тЬЕ Validation р╕Др╕гр╕Ър╕Цр╣Йр╕зр╕Щ

### 3. `EditUserDialog`
**Path:** `src/components/EditUserDialog.tsx`

Dialog р╕кр╕│р╕лр╕гр╕▒р╕Ъ Admin р╣Бр╕Бр╣Йр╣Др╕Вр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й

**Features:**
- тЬЕ р╣Бр╕Бр╣Йр╣Др╕Вр╕Кр╕╖р╣Ир╕нр╕гр╣Йр╕▓р╕Щ, р╕Кр╕╖р╣Ир╕нр╣Бр╕кр╕Фр╕З
- тЬЕ р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ role
- тЬЕ р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕кр╕Цр╕▓р╕Щр╕░ verified
- тЬЕ р╣Бр╕кр╕Фр╕Зр╕кр╕Цр╕▓р╕Щр╕░ emailVerified
- тЬЕ р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Бр╕Бр╣Йр╣Др╕Вр╕нр╕╡р╣Ар╕бр╕ер╣Др╕Фр╣Й

### 4. `Users.tsx` (Admin Page)
**Path:** `src/pages/Users.tsx`

р╕лр╕Щр╣Йр╕▓р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕кр╕│р╕лр╕гр╕▒р╕Ъ Admin р╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ

**Features:**
- тЬЕ р╣Бр╕кр╕Фр╕Зр╕гр╕▓р╕вр╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
- тЬЕ р╕Др╣Йр╕Щр╕лр╕▓р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й (р╕нр╕╡р╣Ар╕бр╕е, р╕Кр╕╖р╣Ир╕нр╕гр╣Йр╕▓р╕Щ)
- тЬЕ р╣Бр╕кр╕Фр╕З badges: role, emailVerified, verified
- тЬЕ р╣Ар╕Юр╕┤р╣Ир╕бр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Гр╕лр╕бр╣И
- тЬЕ р╣Бр╕Бр╣Йр╣Др╕Вр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
- тЬЕ р╕ер╕Ър╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
- тЬЕ р╕Хр╕▓р╕гр╕▓р╕Зр╕кр╕зр╕вр╕Зр╕▓р╕б responsive

### 5. `NotVerified.tsx`
**Path:** `src/pages/NotVerified.tsx`

р╕лр╕Щр╣Йр╕▓р╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╣Ар╕бр╕╖р╣Ир╕нр╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤

**Features:**
- тЬЕ р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
- тЬЕ р╣Бр╕кр╕Фр╕Зр╕кр╕Цр╕▓р╕Щр╕░ verified
- тЬЕ р╕Др╕│р╣Бр╕Щр╕░р╕Щр╕│р╕гр╕нр╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤
- тЬЕ р╕Ыр╕╕р╣Ир╕б logout

---

## ЁЯЫая╕П Admin Utilities

**Path:** `src/lib/adminUtils.ts`

### Functions

```typescript
// р╕Фр╕╢р╕Зр╕гр╕▓р╕вр╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
getAllUsers(): Promise<UserData[]>

// р╕Фр╕╢р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Ар╕Фр╕╡р╕вр╕з
getUserById(uid: string): Promise<UserData | null>

// р╕кр╕гр╣Йр╕▓р╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Гр╕лр╕бр╣Ир╣Вр╕Фр╕в Admin
createUserByAdmin(data: {
  email: string;
  password: string;
  shopName: string;
  displayName: string;
  role: UserRole;
  verified: boolean;
}): Promise<{success: boolean; uid?: string; error?: string}>

// р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
updateUser(uid: string, updates: Partial<UserData>): Promise<{success: boolean; error?: string}>

// р╕ер╕Ър╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
deleteUser(uid: string): Promise<{success: boolean; error?: string}>

// р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕кр╕Цр╕▓р╕Щр╕░ verified
toggleUserVerification(uid: string, verified: boolean): Promise<{success: boolean; error?: string}>

// р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ role
changeUserRole(uid: string, role: UserRole): Promise<{success: boolean; error?: string}>

// р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╣Ар╕Ыр╣Зр╕Щ admin р╕лр╕гр╕╖р╕нр╣Др╕бр╣И
isAdmin(userData: UserData | null): boolean

// р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ verified р╕лр╕гр╕╖р╕нр╣Др╕бр╣И
isVerified(userData: UserData | null): boolean
```

---

## ЁЯОп р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### 1. р╕кр╕гр╣Йр╕▓р╕З Admin User р╣Бр╕гр╕Б

**р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 1: р╕кр╕бр╕▒р╕Др╕гр╣Бр╕ер╣Йр╕зр╣Бр╕Бр╣Йр╣Гр╕Щ Firestore Console**

1. р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Бр╕Ыр╕Бр╕Хр╕┤р╕Чр╕╡р╣И `/register`
2. р╣Др╕Ыр╕Чр╕╡р╣И [Firestore Console](https://console.firebase.google.com/)
3. р╣Ар╕Вр╣Йр╕▓ Firestore > users collection
4. р╕лр╕▓ document р╕Вр╕нр╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕З
5. р╣Бр╕Бр╣Йр╣Др╕В fields:
   - `role`: р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Ыр╣Зр╕Щ `admin`
   - `verified`: р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Ыр╣Зр╕Щ `true`
6. р╕Ър╕▒р╕Щр╕Чр╕╢р╕Б
7. Logout р╣Бр╕ер╕░ Login р╣Гр╕лр╕бр╣И

**р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣И 2: р╣Гр╕Кр╣Й Firebase Console р╕кр╕гр╣Йр╕▓р╕З**

1. Firebase Console > Authentication > Add user
2. р╕кр╕гр╣Йр╕▓р╕З user (р╕Бр╕гр╕нр╕Б email, password)
3. р╣Др╕Ыр╕Чр╕╡р╣И Firestore > users collection
4. Add document р╣Вр╕Фр╕вр╣Гр╕Кр╣Й UID р╕Ир╕▓р╕Б Authentication
5. р╕Бр╕гр╕нр╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕е:
```json
{
  "uid": "paste-uid-here",
  "email": "admin@example.com",
  "displayName": "Admin",
  "shopName": "Admin Shop",
  "role": "admin",
  "verified": true,
  "emailVerified": true,
  "createdAt": "2024-01-01T00:00:00.000Z"
}
```

### 2. р╕Чр╕Фр╕кр╕нр╕Ър╕гр╕░р╕Ър╕Ъ

#### р╕Чр╕Фр╕кр╕нр╕Ъ Admin

1. Login р╕Фр╣Йр╕зр╕вр╕Ър╕▒р╕Нр╕Кр╕╡ admin
2. р╣Др╕Ыр╕Чр╕╡р╣Ир╕лр╕Щр╣Йр╕▓ "р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й" (/users)
3. р╕ер╕нр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Гр╕лр╕бр╣И
4. р╕ер╕нр╕Зр╣Бр╕Бр╣Йр╣Др╕Вр╕Вр╣Йр╕нр╕бр╕╣р╕е
5. р╕ер╕нр╕Зр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ verified status

#### р╕Чр╕Фр╕кр╕нр╕Ъ Seller

1. р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Бр╣Гр╕лр╕бр╣И (р╕Ир╕░р╣Ар╕Ыр╣Зр╕Щ seller + verified=true)
2. р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕нр╕╡р╣Ар╕бр╕е
3. Login тЖТ р╣Ар╕Вр╣Йр╕▓р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╕Чр╕▒р╕Щр╕Чр╕╡
4. Login р╕Фр╣Йр╕зр╕в admin тЖТ р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤ seller
5. Login р╕Фр╣Йр╕зр╕в seller р╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З тЖТ р╣Ар╕Вр╣Йр╕▓р╣Др╕Фр╣Йр╣Бр╕ер╣Йр╕з тЬЕ

#### р╕Чр╕Фр╕кр╕нр╕Ъ Role Protection

1. Login р╕Фр╣Йр╕зр╕в seller
2. р╕Юр╕вр╕▓р╕вр╕▓р╕бр╣Ар╕Вр╣Йр╕▓ `/users` тЖТ р╕Др╕зр╕гр╣Вр╕Фр╕Щр╕Ър╕ер╣Зр╕нр╕Б (р╣Др╕бр╣Ир╕бр╕╡р╕кр╕┤р╕Чр╕Шр╕┤р╣М)
3. Login р╕Фр╣Йр╕зр╕в admin
4. р╣Ар╕Вр╣Йр╕▓ `/users` тЖТ р╣Ар╕Вр╣Йр╕▓р╣Др╕Фр╣Й тЬЕ

---

## ЁЯОи UI/UX Features

### Role Badges

**р╣Гр╕Щ Layout (Sidebar)**
- Admin р╣Бр╕кр╕Фр╕З badge "ADMIN" р╕кр╕╡р╕бр╣Ир╕зр╕З
- Shield icon р╕Чр╕╡р╣Ир╕бр╕╕р╕бр╕гр╕╣р╕Ыр╣Вр╕Ыр╕гр╣Др╕Яр╕ер╣М

**р╣Гр╕Щр╕Хр╕▓р╕гр╕▓р╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й**
- Admin: Badge р╕кр╕╡р╕бр╣Ир╕зр╕Зр╕Юр╕гр╣Йр╕нр╕б Shield icon
- Seller: Badge р╕кр╕╡р╣Ар╕Чр╕▓

### Status Badges

**Email Verified**
- тЬУ р╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕з: р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╣Бр╕ер╣Йр╕з
- тЪа р╕кр╕╡р╣Ар╕лр╕ер╕╖р╕нр╕З: р╕вр╕▒р╕Зр╣Др╕бр╣Ир╕вр╕╖р╕Щр╕вр╕▒р╕Щ

**Verified (р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤)**
- тЬУ р╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕з: р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╣Бр╕ер╣Йр╕з
- тЬЧ р╕кр╕╡р╣Бр╕Фр╕З: р╕гр╕нр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤

---

## ЁЯУЭ Firestore Security Rules

р╕нр╕▒р╕Ыр╣Ар╕Фр╕Х rules р╣Гр╕лр╣Йр╕гр╕нр╕Зр╕гр╕▒р╕Ъ role:

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Helper functions
    function isAuthenticated() {
      return request.auth != null;
    }
    
    function isAdmin() {
      return isAuthenticated() && 
             get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role == 'admin';
    }
    
    function isOwner(uid) {
      return isAuthenticated() && request.auth.uid == uid;
    }
    
    function isVerified() {
      return isAuthenticated() && 
             get(/databases/$(database)/documents/users/$(request.auth.uid)).data.verified == true;
    }

    // Users collection
    match /users/{userId} {
      // р╕нр╣Ир╕▓р╕Щр╣Др╕Фр╣Й: admin р╕Чр╕╕р╕Бр╕Др╕Щ, р╕лр╕гр╕╖р╕нр╣Ар╕Ир╣Йр╕▓р╕Вр╕нр╕З account
      allow read: if isAdmin() || isOwner(userId);
      
      // р╣Ар╕Вр╕╡р╕вр╕Щр╣Др╕Фр╣Й: admin р╕Чр╕╕р╕Бр╕Др╕Щ, р╕лр╕гр╕╖р╕нр╣Ар╕Ир╣Йр╕▓р╕Вр╕нр╕З (р╣Бр╕Хр╣Ир╕лр╣Йр╕▓р╕бр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ role/verified)
      allow create: if isOwner(userId);
      allow update: if isAdmin() || 
                      (isOwner(userId) && 
                       !request.resource.data.diff(resource.data).affectedKeys().hasAny(['role', 'verified', 'uid']));
      
      // р╕ер╕Ър╣Др╕Фр╣Й: admin р╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ
      allow delete: if isAdmin();
    }
    
    // р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З: products collection
    match /products/{productId} {
      // р╕нр╣Ир╕▓р╕Щр╣Др╕Фр╣Й: verified users
      allow read: if isVerified();
      
      // р╣Ар╕Вр╕╡р╕вр╕Щр╣Др╕Фр╣Й: admin р╣Бр╕ер╕░ verified sellers
      allow write: if isAdmin() || (isVerified() && request.auth.uid != null);
    }
  }
}
```

---

## ЁЯЪА р╕Бр╕▓р╕г Deploy

### 1. р╕нр╕▒р╕Ыр╣Ар╕Фр╕Х Firestore Rules

1. р╣Др╕Ыр╕Чр╕╡р╣И Firebase Console
2. Firestore Database > Rules
3. р╕Др╕▒р╕Фр╕ер╕нр╕Б rules р╕Фр╣Йр╕▓р╕Щр╕Ър╕Щ
4. Publish

### 2. р╕кр╕гр╣Йр╕▓р╕З Admin User р╣Бр╕гр╕Б

р╕Хр╕▓р╕бр╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╣Гр╕Щ "р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ" р╕Фр╣Йр╕▓р╕Щр╕Ър╕Щ

### 3. р╕Чр╕Фр╕кр╕нр╕Ър╕гр╕░р╕Ър╕Ъ

- тЬЕ р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Б seller р╣Гр╕лр╕бр╣И
- тЬЕ р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕нр╕╡р╣Ар╕бр╕е
- тЬЕ Login р╣Бр╕ер╣Йр╕зр╣Ар╕Ир╕нр╕лр╕Щр╣Йр╕▓ "р╕гр╕нр╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤"
- тЬЕ Admin р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤ seller
- тЬЕ Seller login р╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З тЖТ р╣Ар╕Вр╣Йр╕▓р╣Др╕Фр╣Й
- тЬЕ Seller р╕Юр╕вр╕▓р╕вр╕▓р╕бр╣Ар╕Вр╣Йр╕▓ /users тЖТ р╕Цр╕╣р╕Бр╕Ър╕ер╣Зр╕нр╕Б
- тЬЕ Admin р╣Ар╕Вр╣Йр╕▓ /users тЖТ р╣Ар╕Вр╣Йр╕▓р╣Др╕Фр╣Й

---

## ЁЯУЛ р╕кр╕гр╕╕р╕Ы Features

### тЬЕ р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╕Чр╕│р╣Др╕Фр╣Й

**Admin**
- тЬЕ р╣Ар╕Вр╣Йр╕▓р╕Цр╕╢р╕Зр╕Чр╕╕р╕Бр╕лр╕Щр╣Йр╕▓
- тЬЕ р╕Фр╕╣р╕гр╕▓р╕вр╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
- тЬЕ р╕кр╕гр╣Йр╕▓р╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Гр╕лр╕бр╣И (р╕Бр╕│р╕лр╕Щр╕Ф role, verified)
- тЬЕ р╣Бр╕Бр╣Йр╣Др╕Вр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
- тЬЕ р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щ role р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
- тЬЕ р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤/р╕Ыр╕Пр╕┤р╣Ар╕кр╕Шр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й (toggle verified)
- тЬЕ р╕ер╕Ър╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
- тЬЕ р╕Фр╕╣р╕кр╕Цр╕▓р╕Щр╕░ emailVerified

**Seller**
- тЬЕ р╕кр╕бр╕▒р╕Др╕гр╕кр╕бр╕▓р╕Кр╕┤р╕Б (verified=true auto-verified)
- тЬЕ р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕нр╕╡р╣Ар╕бр╕е
- тЬЕ р╣Ар╕Вр╣Йр╕▓р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╕Чр╕▒р╕Щр╕Чр╕╡
- тЬЕ р╕лр╕ер╕▒р╕Зр╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤ р╣Ар╕Вр╣Йр╕▓р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Др╕Фр╣Й
- тЬЕ р╣Ар╕Вр╣Йр╕▓р╕Цр╕╢р╕Зр╕лр╕Щр╣Йр╕▓р╕Чр╕╡р╣Ир╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕нр╕Щр╕╕р╕Нр╕▓р╕Хр╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ

**р╕гр╕░р╕Ър╕Ъ**
- тЬЕ р╕кр╣Ир╕Зр╕нр╕╡р╣Ар╕бр╕ер╕вр╕╖р╕Щр╕вр╕▒р╕Щр╣Ар╕бр╕╖р╣Ир╕нр╕кр╕гр╣Йр╕▓р╕Зр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й
- тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ emailVerified
- тЬЕ р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ verified (р╕вр╕Бр╣Ар╕зр╣Йр╕Щ admin)
- тЬЕ Role-based access control
- тЬЕ UI/UX р╕кр╕зр╕вр╕Зр╕▓р╕б responsive
- тЬЕ Error handling р╕Др╕гр╕Ър╕Цр╣Йр╕зр╕Щ
- тЬЕ Loading states
- тЬЕ Toast notifications

---

## ЁЯОЙ р╕кр╕гр╕╕р╕Ы

р╕гр╕░р╕Ър╕Ър╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕кр╕бр╕Ър╕╣р╕гр╕Ур╣Мр╣Бр╕Ър╕Ъ:

тЬЕ **2 Roles:** Admin & Seller  
тЬЕ **Verified System:** Seller р╕Хр╣Йр╕нр╕Зр╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤  
тЬЕ **Email Verification:** р╕Ър╕▒р╕Зр╕Др╕▒р╕Ър╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕нр╕╡р╣Ар╕бр╕е  
тЬЕ **Admin Panel:** р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Бр╕Ър╕Ър╕Др╕гр╕Ър╕зр╕Зр╕Ир╕г  
тЬЕ **Protected Routes:** р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╕нр╕вр╣Ир╕▓р╕Зр╣Ар╕Вр╣Йр╕бр╕Зр╕зр╕Ф  
тЬЕ **Beautiful UI:** Gaming theme р╕кр╕зр╕вр╕Зр╕▓р╕б  
тЬЕ **Security:** Firestore rules р╕Чр╕╡р╣Ир╕Ыр╕ер╕нр╕Фр╕ар╕▒р╕в  

**р╕Юр╕гр╣Йр╕нр╕бр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Ир╕гр╕┤р╕З 100%!** ЁЯЪА




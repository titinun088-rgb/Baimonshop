üìò ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ API wePAY

‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå / ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
‚Ä¢ ‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
‚Ä¢ ‡∏ä‡∏≥‡∏£‡∏∞‡∏ö‡∏¥‡∏•
‚Ä¢ ‡∏ã‡∏∑‡πâ‡∏≠‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î / ‡πÄ‡∏Å‡∏°
‡∏ú‡πà‡∏≤‡∏ô RESTful API ‡∏Ç‡∏≠‡∏á wePAY

‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£: wePAY API Document (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î 1 ‡∏Å.‡∏Ñ. 2568) 

wePAY - Overview_Coding_PHP 260‚Ä¶


‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Service List / ‡∏£‡∏≤‡∏Ñ‡∏≤ 

MTOPUP CODE

1Ô∏è‚É£ ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö (Flow)

‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡∏Ñ‡∏π‡πà‡∏Ñ‡πâ‡∏≤ ‚Üí ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏õ‡∏ó‡∏µ‡πà wePAY (API)

wePAY ‚Üí ‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ ‡πÅ‡∏•‡∏∞‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏ß‡πà‡∏≤ ‚Äú‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß‚Äù

wePAY ‚Üí ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á

wePAY ‚Üí ‡∏™‡πà‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏µ‡πà Callback URL (resp_url) ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏π‡πà‡∏Ñ‡πâ‡∏≤

‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏π‡πà‡∏Ñ‡πâ‡∏≤ ‚Üí ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à / ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß)

üìå ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á Poll ‡∏ñ‡∏≤‡∏°‡∏ú‡∏•‡πÄ‡∏≠‡∏á ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ Push ‡∏ú‡∏•‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤

2Ô∏è‚É£ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠

Username (‡∏à‡∏≤‡∏Å wePAY)

Password

‡πÅ‡∏õ‡∏•‡∏á Password ‡πÄ‡∏õ‡πá‡∏ô MD5(password)

IP Server ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API (‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏à‡πâ‡∏á wePAY whitelist)

Callback URL (HTTPS ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

3Ô∏è‚É£ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠

Endpoint

POST https://www.wepay.in.th/client_api.json.php

Body (JSON)

{
  "username": "YOUR_USERNAME",
  "password_hash": "MD5_PASSWORD",
  "type": "balance_inquiry"
}

Response ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á

{
  "code": "00000",
  "ledger_balance": "299987.74",
  "available_balance": 299987.74
}
4Ô∏è‚É£ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ / ‡∏£‡∏≤‡∏Ñ‡∏≤ (Server & Item List)

‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö:

‡πÄ‡∏ä‡πá‡∏Ñ‡∏£‡∏≤‡∏Ñ‡∏≤

‡πÄ‡∏ä‡πá‡∏Ñ ref ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å

‡πÄ‡∏ä‡πá‡∏Ñ‡∏¢‡∏≠‡∏î‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡πà‡∏≥‚Äì‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î

Endpoint

POST https://www.wepay.in.th/client_api.json.php

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô 12CALL)

{
  "username": "YOUR_USERNAME",
  "password_hash": "MD5_PASSWORD",
  "type": "mtopup",
  "pay_to_company": "12CALL",
  "payee_info": "true"
}

‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÅ‡∏ö‡∏ö JSON list:

https://www.wepay.in.th/comp_export.php?json

MTOPUP CODE

5Ô∏è‚É£ ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô / ‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏á‡∏¥‡∏ô

Endpoint

POST https://www.wepay.in.th/client_api.json.php

Body (JSON)

{
  "username": "YOUR_USERNAME",
  "password_hash": "MD5_PASSWORD",
  "resp_url": "https://yourdomain.com/wepay_callback",
  "dest_ref": "ORDER12345",
  "type": "mtopup",
  "pay_to_company": "12CALL",
  "pay_to_amount": "10",
  "pay_to_ref1": "0812345678"
}

üìå dest_ref ‡∏ï‡πâ‡∏≠‡∏á ‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥ (‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô order_id ‡πÑ‡∏î‡πâ)

6Ô∏è‚É£ ‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏≤‡∏Å wePAY (Callback)

wePAY ‡∏à‡∏∞ POST ‡∏°‡∏≤‡∏ó‡∏µ‡πà resp_url

Content-Type

x-www-form-urlencoded

‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö

dest_ref=ORDER12345
transaction_id=3871249
status=2
sms=success...
operator_trxnsid=1933602087

Status

2 = ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à

4 = ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß (‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏∑‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤ wePAY)

7Ô∏è‚É£ ‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö wePAY (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å)

‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏´‡∏ô‡∏∂‡πà‡∏á

SUCCEED|ORDER_ID=ORDER12345

‡∏´‡∏£‡∏∑‡∏≠

ERROR|DB_ERROR

‚ùó ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ï‡∏≠‡∏ö ‚Üí wePAY ‡∏à‡∏∞‡∏™‡πà‡∏á‡∏ã‡πâ‡∏≥

8Ô∏è‚É£ ‡∏î‡∏∂‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏∑‡∏ô (Refund ‡∏Å‡∏£‡∏ì‡∏µ‡πÄ‡∏ï‡∏¥‡∏°‡∏ú‡∏¥‡∏î)

Endpoint

POST https://www.wepay.in.th/mtopup_refund_api.php

Body

username=YOUR_USERNAME
password_hash=MD5_PASSWORD
transaction_id=123456
dest_ref=REFUND123
pay_to_company=TMVH
resp_url=https://yourdomain.com/wepay_refund_callback

‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ó‡∏µ‡πà callback ‡πÄ‡∏ä‡πà‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô

9Ô∏è‚É£ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á (‡∏Å‡∏£‡∏ì‡∏µ callback ‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤)
{
  "username": "YOUR_USERNAME",
  "password_hash": "MD5_PASSWORD",
  "type": "get_output",
  "transaction_id": "123456"
}
üîü Status Code ‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢
Code	‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢
00000	‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
30016	dest_ref ‡∏ã‡πâ‡∏≥
30019	‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏≠
30005	Callback URL ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
20005	IP ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï